<link rel="import" href="highcharts-behavior.html">
<link rel="import" href="highcharts-shared-styles.html">
<link rel="import" href="../bower_components/iron-ajax/iron-ajax.html">

<dom-module id="highcharts-chart">
    <template>
        <style include="highcharts-shared-styles"></style>
        <div id="Chart" width="100%" on-click="_checkSelected"></div>
        <content></content>

        <p>Repositories:</p>

        <template is="dom-repeat" items="[[repos]]">
            <span>{{item.name}}</span>
            <br />
        </template>

        <iron-ajax
            id="elajax"
            url="https://api.github.com/users/burczu/repos"
            params='{"type":"all"}'
            handle-as="json"
            on-response="handleResponse">
        </iron-ajax>

    </template>
    <script>
        'use strict';
        Polymer({
            is: "highcharts-chart",
            behaviors: [Highcharts.Polymer_BaseBehavior, Highcharts.Polymer_ChartBehavior],
            properties: {
                repos: {
                    type: Array
                },
                type: {type: String, value: 'spline', observer: '_updateType'}},
            //ready: function() {this.__createChart()},


            ready: function () {
                //this.__createChart();
                this.$.elajax.generateRequest();
                //this.$.requestRepos.generateRequest();
            },
            handleResponse: function (data) {
                //this.repos = data.detail.response;
                this.__createChart()
            }
        });
    </script>
</dom-module>
